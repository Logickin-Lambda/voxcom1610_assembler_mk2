START:
MOV R0 L255
MOV R0 H255
PORT 1 R0
MOV R0 L0
MOV R0 H255
MOV R1 L0
PORT 2 R1
PORT 1 R0
MOV R0 L0
MOV R1 L0
MOV R2 L0
MOV R3 L0
MOV R4 L0
MOV R5 L0
MOV R6 L0
MOV R7 L0
MOV R0 L0
MOV R7 L64
MOV AB R7 R7
TCOM A
MOV R7 S
CLEAR_LOOP:
MOV @R6 R0
MOV AB R6 R6
ADD A 1
MOV R6 S
MOV AB R7 R7
ADD A 1
MOV R7 S
JLZ CLEAR_LOOP
MOV R0 L1
MOV @0 R0
MOV @16 R0
MOV R0 H255
MOV R1 L0
PORT 2 R1
PORT 1 R0
MOV R7 L78
MOV AB R7 R7
TCOM A
MOV R7 S
MOV R2 L10
MOV AB R2 R2
TCOM A
MOV R2 S
MAIN_LOGIC_LOOP:
MOV R6 L16
MOV AB R6 R6
TCOM A
MOV R6 S
MOV R5 L0
MOV R4 L16
MOV R1 L0
ADD_LOOP:
MOV R0 @R5
MOV AB R1 R1
ADD A 0
JEZ	NO_CARRY
MOV AB R0 R1
ADD A B
MOV R0 S
NO_CARRY:
MOV R1 @R4
MOV AB R0 R1
ADD A B
MOV R0 S
MOV AB R0 R2
ADD A B
JLZ SKIP_CARRY
MOV R0 S
MOV R1 L1
JMP END_CARRY
SKIP_CARRY:
MOV R1 L0
END_CARRY:
MOV @R5 R0
MOV AB R4 R4
ADD A 1
MOV R4 S
MOV AB R5 R5
ADD A 1
MOV R5 S
MOV AB R6 R6
ADD A 1
MOV R6 S
JLZ ADD_LOOP
MOV R0 L255
MOV R0 H255
PORT 1 R0
MOV R6 L15
MOV R5 L0
MOV R4 L255
MOV R4 H255
PRINT_LOOP:
PORT 2 R5
MOV R0 @R6
MOV R0 H255
PORT 1 R0
MOV AB R5 R5
ADD A 1
MOV R5 S
MOV AB R6 R4
ADD A B
MOV R6 S
JGEZ PRINT_LOOP
MOV R6 L16
MOV AB R6 R6
TCOM A
MOV R6 S
MOV R5 L0
MOV R4 L16
SWAP_LOOP:
MOV R0 @R5
MOV R1 @R4
MOV @R4 R0
MOV @R5 R1
MOV AB R4 R4
ADD A 1
MOV R4 S
MOV AB R5 R5
ADD A 1
MOV R5 S
MOV AB R6 R6
ADD A 1
MOV R6 S
JLZ SWAP_LOOP
MOV AB R7 R7
ADD A 1
MOV R7 S
JLZ MAIN_LOGIC_LOOP
END